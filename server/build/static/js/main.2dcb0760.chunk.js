(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{42:function(e,t,a){e.exports=a(76)},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(37),c=a.n(l),s=a(2),o=a(18),i=a(7),u=a.n(i),m=function(e){var t=e.entry,a=e.deleteEntry,l=e.mealName;return Object(n.useEffect)((function(){return u.a.AutoInit()}),[]),r.a.createElement("tr",{className:"food-row"},r.a.createElement("td",null,t.food.name),r.a.createElement("td",null,Math.round(t.food.calories*t.servings)),r.a.createElement("td",null,Math.round(t.food.protein*t.servings),"g"),r.a.createElement("td",null,Math.round(t.food.carbs*t.servings),"g"),r.a.createElement("td",null,Math.round(t.food.fat*t.servings),"g"),r.a.createElement("td",null,Math.round(t.servings)),r.a.createElement("td",null,r.a.createElement("i",{style:{cursor:"pointer"},onClick:function(){return a(t._id,l.toLowerCase())},className:"material-icons"},"delete")))},d=function(e){var t=e.entries,a=e.deleteEntry,n=e.mealName;return r.a.createElement("div",null,r.a.createElement("table",{className:"highlight centered meal-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Calories"),r.a.createElement("th",null,"Protein"),r.a.createElement("th",null,"Carbs"),r.a.createElement("th",null,"Fat"),r.a.createElement("th",null,"Servings"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(m,{key:e._id,entry:e,deleteEntry:a,mealName:n})})))))},f=function(e){var t,a=e.mealName,n=e.mealItems,l=e.deleteEntry;return t=n&&0!==n.length?r.a.createElement(d,{mealName:a,entries:n,deleteEntry:l}):r.a.createElement("div",null,r.a.createElement("em",null,"No items added yet.")),r.a.createElement("div",{className:"z-depth-1 meal-display"},r.a.createElement("h4",null,a),t)},E=a(9),v=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(E.g)();return r.a.createElement("form",{className:"search-form",onSubmit:function(e){e.preventDefault(),""!==a&&c.push("/search/".concat(a))}},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{placeholder:"Search the database for a food...",onChange:function(e){return l(e.target.value)},value:a})),r.a.createElement("div",{className:"centered"},r.a.createElement("button",{type:"submit",className:"btn waves-effect waves-light"},"Search")))},b=a(40),h=a.n(b),p=(a(57),a(77)),g=a(10),N=a.n(g),y="http://localhost:8000/api",w=function(e,t){return N()({method:"post",url:"".concat(y,"/users/login"),data:{username:e,password:t}})},O=function(e,t){return N()({method:"post",url:"".concat(y,"/users/register"),data:{username:e,password:t}})},j=function(e,t){return e.calories+=t.food.calories*t.servings,e.protein+=t.food.protein*t.servings,e.carbs+=t.food.carbs*t.servings,e.fat+=t.food.fat*t.servings,e},k=function(e){var t={calories:0,protein:0,carbs:0,fat:0};return e.forEach((function(e){return e.reduce(j,t)})),t},_=function(e){var t=e.date,a=e.setDate,l=Object(n.useState)({breakfast:[],lunch:[],dinner:[],snacks:[]}),c=Object(s.a)(l,2),i=c[0],m=c[1],d=Object(n.useState)(!1),E=Object(s.a)(d,2),b=E[0],g=E[1];Object(n.useEffect)((function(){return u.a.AutoInit()}),[]),Object(n.useEffect)((function(){(function(e){var t=Object(p.a)(e,"yyyy-MM-dd"),a=window.localStorage.getItem("nutritionAppToken");return N()({method:"get",url:"".concat(y,"/days/").concat(t),headers:{Authorization:a}}).then((function(e){return e.data}))})(t).then((function(e){console.log(e),m(e)})).catch((function(e){return console.log("Failed to fetch data")}))}),[t]);var w=function(e,a){var n=Object(o.a)({},i);n[a]=i[a].filter((function(t){return t._id!==e})),m(n),function(e,t,a){var n=Object(p.a)(t,"yyyy-MM-dd"),r=window.localStorage.getItem("nutritionAppToken");return N()({method:"delete",url:"".concat(y,"/entries/").concat(e),headers:{Authorization:r},data:{date:n,mealName:a}})}(e,t,a).then((function(e){return console.log(e.data.message)}))},O=k(Object.values(i));return r.a.createElement("div",{className:"container center-align"},r.a.createElement("div",{className:"home-header"},r.a.createElement("div",{className:"date-info"},r.a.createElement("h3",null,Object(p.a)(t,"MMMM do")),r.a.createElement("button",{className:"btn-floating btn-large waves-effect waves-light calendar-button",onClick:function(){return g(!b)}},r.a.createElement("i",{className:"material-icons"},"date_range"))),b&&r.a.createElement("div",null,r.a.createElement(h.a,{month:t,selectedDays:t,onDayClick:function(e){a(e),console.log(e)}})),r.a.createElement("div",{className:"food-search"},r.a.createElement(v,null))),r.a.createElement("div",{className:"divider"}),r.a.createElement("div",null,r.a.createElement("div",{className:"totals"},r.a.createElement("div",null,"Calories: ",O.calories),r.a.createElement("div",null,"Protein: ",O.protein,"g"),r.a.createElement("div",null,"Carbs: ",O.carbs,"g"),r.a.createElement("div",null,"Fat: ",O.fat,"g")),r.a.createElement(f,{mealName:"Breakfast",mealItems:i.breakfast,deleteEntry:w}),r.a.createElement(f,{mealName:"Lunch",mealItems:i.lunch,deleteEntry:w}),r.a.createElement(f,{mealName:"Dinner",mealItems:i.dinner,deleteEntry:w}),r.a.createElement(f,{mealName:"Snacks",mealItems:i.snacks,deleteEntry:w})))},S=function(e){var t=e.result,a=e.date,l=Object(n.useState)(1),c=Object(s.a)(l,2),i=c[0],m=c[1],d=Object(n.useState)("breakfast"),f=Object(s.a)(d,2),E=f[0],v=f[1];return r.a.createElement("li",null,r.a.createElement("div",{className:"collapsible-header"},r.a.createElement("i",{className:"material-icons"},"keyboard_arrow_down"),t.name,r.a.createElement("span",{className:"brand-name"}," (",t.brand,")")),r.a.createElement("div",{className:"collapsible-body"},r.a.createElement("ul",{className:"nutrition-info"},r.a.createElement("li",null,"Calories: ",Math.round(t.calories*(i||1))),r.a.createElement("li",null,"Protein: ",Math.round(t.protein*(i||1)),"g"),r.a.createElement("li",null,"Carbs: ",Math.round(t.carbs*(i||1)),"g"),r.a.createElement("li",null,"Fat: ",Math.round(t.fat*(i||1)),"g")),r.a.createElement("div",{className:"divider"}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e,t){var a=Object(p.a)(t,"yyyy-MM-dd"),n=window.localStorage.getItem("nutritionAppToken");return N()({method:"post",url:"".concat(y,"/entries"),headers:{Authorization:n},data:{date:a,mealName:e.meal,foodInfo:{name:e.name,api_id:e.api_id,calories:e.calories,protein:e.protein,carbs:e.carbs,fat:e.fat,servings:e.servings}}})}(Object(o.a)({servings:i,meal:E},t),a).then((function(e){console.log(e),u.a.toast({html:"Food added!"})}))}},r.a.createElement("div",{className:"row search-options"},r.a.createElement("div",{className:"input-field col m2 s4"},r.a.createElement("span",null,"Servings:"),r.a.createElement("input",{type:"number",required:!0,value:i,onChange:function(e){e.target.value>=0&&m(e.target.value)}})),r.a.createElement("div",{className:"input-field col m4 s8"},r.a.createElement("span",null,"Meal:"),r.a.createElement("select",{required:!0,value:E,onChange:function(e){return v(e.target.value)}},r.a.createElement("option",{value:"breakfast",className:"r-option"},"Breakfast"),r.a.createElement("option",{value:"lunch"},"Lunch"),r.a.createElement("option",{value:"dinner"},"Dinner"),r.a.createElement("option",{value:"snacks"},"Snack")))),r.a.createElement("div",{style:{marginLeft:"1rem"}},r.a.createElement("button",{type:"submit",className:"waves-effect waves-light btn"},"Add Food")))))},M=function(e){var t=e.date,a=Object(E.h)().query;Object(n.useEffect)((function(){return u.a.AutoInit()}));var l=Object(n.useState)([]),c=Object(s.a)(l,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){(function(e){return N()({method:"post",url:"https://api.nutritionix.com/v1_1/search",data:{appId:"018f74af",appKey:"6c4296b8185da820838481848ffb9985",query:"".concat(e),fields:["item_name","brand_name","nf_calories","nf_protein","nf_total_carbohydrate","nf_total_fat"]}}).then((function(e){return e.data.hits.map((function(e){return{name:e.fields.item_name,brand:e.fields.brand_name,calories:Math.round(e.fields.nf_calories),protein:Math.round(e.fields.nf_protein),carbs:Math.round(e.fields.nf_total_carbohydrate),fat:Math.round(e.fields.nf_total_fat),api_id:e._id}}))}))})(a).then((function(e){i(e)}))}),[a]),r.a.createElement("div",{className:"container"},r.a.createElement(v,null),r.a.createElement("h4",null,'Search results for "',a,'"'),r.a.createElement("ul",{className:"collapsible"},o.map((function(e){return r.a.createElement(S,{key:e.api_id,result:e,date:t})}))))},I=a(19),C=a.n(I),x=function(e){var t=e.setUser;Object(n.useEffect)((function(){return u.a.AutoInit()}),[]);var a=Object(n.useState)(""),l=Object(s.a)(a,2),c=l[0],o=l[1],i=Object(n.useState)(""),m=Object(s.a)(i,2),d=m[0],f=m[1],E=Object(n.useState)(""),v=Object(s.a)(E,2),b=v[0],h=v[1],p=Object(n.useState)(!1),g=Object(s.a)(p,2),N=g[0],y=g[1];return r.a.createElement("div",{className:"container center-align"},r.a.createElement("div",{className:"z-depth-1 login-form"},r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons medium"},"account_circle"),r.a.createElement("h4",null,N?"Register":"Sign In")),b&&r.a.createElement("div",{className:"login-error"},b),r.a.createElement("form",{className:"row",onSubmit:function(e){var a;return C.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),n.prev=1,!N){n.next=8;break}return n.next=5,C.a.awrap(O(c,d));case 5:a=n.sent,n.next=11;break;case 8:return n.next=10,C.a.awrap(w(c,d));case 10:a=n.sent;case 11:window.localStorage.setItem("nutritionAppToken",a.data.token),t(!0),console.log(a),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(1),n.t0.response?h(n.t0.response.data.message):h("Login service is currently down");case 19:case"end":return n.stop()}}),null,null,[[1,16]])}},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{type:"text",id:"username",value:c,onChange:function(e){return o(e.target.value)},required:!0,minLength:"6",maxLength:"30"}),r.a.createElement("label",{htmlFor:"username"},"Username:")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{type:"password",id:"password",value:d,onChange:function(e){return f(e.target.value)},required:!0,minLength:"6",maxLength:"30"}),r.a.createElement("label",{htmlFor:"password"},"Password:")),r.a.createElement("div",{className:"col s12"},r.a.createElement("button",{className:"btn waves-effect waves-light login-button",type:"submit"},N?"Register":"Sign In"))),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){y(!N),o(""),f(""),h("")},className:"btn waves-effect waves-light register-button"},N?"Sign In":"Register"))))},A=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"404 - Not Found"))},D=function(e){var t=e.date,a=e.setDate,n=e.user,l=e.setUser;return r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/"},!1!==n?r.a.createElement(_,{date:t,setDate:a}):r.a.createElement(x,{setUser:l})),r.a.createElement(E.b,{exact:!0,path:"/search/:query"},!1!==n?r.a.createElement(M,{date:t}):r.a.createElement(E.a,{to:"/"})),r.a.createElement(E.b,null,r.a.createElement(A,null)))},F=a(11),L=function(e){var t=e.user,a=e.setUser;return r.a.createElement("nav",{className:"blue-grey darken-3"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(F.b,{to:"/"},r.a.createElement("div",{className:"brand-logo"},r.a.createElement("i",{className:"material-icons"},"fitness_center"),"Nutrition Tracker")),t&&r.a.createElement("div",{className:"right logout",onClick:function(){window.localStorage.removeItem("nutritionAppToken"),a(!1)}},"Log Out",r.a.createElement("i",{className:"material-icons"},"exit_to_app"))))},q=function(){var e=Object(n.useState)(new Date),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){window.localStorage.getItem("nutritionAppToken")&&u(!0)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,null,r.a.createElement(L,{user:i,setUser:u}),r.a.createElement(D,{date:a,setDate:l,user:i,setUser:u})))};c.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.2dcb0760.chunk.js.map